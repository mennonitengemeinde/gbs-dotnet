@inject ILocalStorageService LocalStorage
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager NavigationManager

@* <MudDrawerHeader> *@
@*     <MudText Typo="Typo.h6">My App</MudText> *@
@* </MudDrawerHeader> *@
<MudNavMenu Class="py-3" Color="Color.Primary">
    <AuthorizeView Roles="@Roles.AllButUser">
        <MudNavLink Href="school" Icon="@Icons.Filled.School" Match="NavLinkMatch.All">School</MudNavLink>
    </AuthorizeView>
    <AuthorizeView Roles="@Roles.AdminAndTeachers">
        <MudNavLink Href="school/students" Icon="@Icons.Filled.People" Match="NavLinkMatch.All">Students</MudNavLink>
    </AuthorizeView>
    <AuthorizeView Roles="@($"{Roles.SuperAdmin}, {Roles.Admin}, {Roles.Teacher}, {Roles.Sound}")">
        <MudText Typo="Typo.caption" Class="tw-text-gray-500 tw-font-bold tw-ml-2">ADMIN</MudText>
        <MudNavLink Href="/admin/streams" Icon="@Icons.Filled.LiveTv">Streams</MudNavLink>
        <MudNavLink Href="/admin/teachers" Icon="@Icons.Filled.Man">Teachers</MudNavLink>
    </AuthorizeView>
    <AuthorizeView Roles="@($"{Roles.SuperAdmin}, {Roles.Admin}, {Roles.Teacher}")">
        <MudNavLink Href="/admin/generations" Icon="@Icons.Filled.GroupWork">Generations</MudNavLink>
        <MudNavLink Href="/admin/churches" Icon="@Icons.Filled.Church">Churches</MudNavLink>
    </AuthorizeView>
    <AuthorizeView Roles="@($"{Roles.SuperAdmin}, {Roles.Admin}")">
        <MudNavLink Href="/admin/users" Icon="@Icons.Filled.PeopleAlt">Users</MudNavLink>
    </AuthorizeView>
</MudNavMenu>

@code {

    private async Task Logout()
    {
        await LocalStorage.RemoveItemAsync("authToken");
        await AuthenticationStateProvider.GetAuthenticationStateAsync();
        NavigationManager.NavigateTo("");
    }

}